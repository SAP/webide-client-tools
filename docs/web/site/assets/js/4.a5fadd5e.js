(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{202:function(e,t,r){e.exports=r.p+"assets/img/karma_browser.0f92852a.png"},203:function(e,t,r){e.exports=r.p+"assets/img/karma_debug.14c3998f.png"},212:function(e,t,r){"use strict";r.r(t);var s=r(9),a=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"testing-for-sap-web-ide-features"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing-for-sap-web-ide-features","aria-hidden":"true"}},[e._v("#")]),e._v(" Testing for SAP Web IDE Features")]),e._v(" "),s("h2",{attrs:{id:"introduction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#introduction","aria-hidden":"true"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),s("p",[s("strong",[e._v("Terms and Definitions")])]),e._v(" "),s("ul",[s("li",[s("p",[s("a",{attrs:{href:"http://karma-runner.github.io/1.0/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Karma"),s("OutboundLink")],1),e._v(" - is an open source test "),s("strong",[e._v("runner")]),e._v(" for JavaScript capable of executing tests on browsers.")])]),e._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://mochajs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mocha"),s("OutboundLink")],1),e._v(" - is an open source JavaScript testing framework. It provides APIs for writing the test suites.")])]),e._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://github.com/SAP/webide-client-tools/blob/master/resources/tests/serviceTestFramework.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("STF - Service Test Framework"),s("OutboundLink")],1),e._v(" - is a proprietary JavaScript module that provides utilities for starting SAP Web IDE inside an "),s("em",[e._v("iframe")]),e._v(" for testing purposes.")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("Service test")]),e._v(" - A test that manipulates SAP Web IDE services in a running SAP Web IDE instance.")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("Unit test")]),e._v(" - A test that manipulates JavaScript modules directly ("),s("strong",[e._v("No")]),e._v(" SAP Web IDE instance involved).")])])]),e._v(" "),s("p",[e._v("The SAP Web IDE client tools repository contains utilities and an "),s("a",{attrs:{href:"https://github.com/SAP/webide-client-tools/tree/master/example",target:"_blank",rel:"noopener noreferrer"}},[e._v("example"),s("OutboundLink")],1),e._v(" on how to integrate the above tools to bootstrap a testing infrastructure for SAP Web IDE features.")]),e._v(" "),s("h2",{attrs:{id:"running-tests-for-the-provided-example-feature"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#running-tests-for-the-provided-example-feature","aria-hidden":"true"}},[e._v("#")]),e._v(" Running Tests for the Provided Example Feature")]),e._v(" "),s("p",[s("strong",[e._v("Prerequisites")])]),e._v(" "),s("ul",[s("li",[e._v("Node.js 6 or later")]),e._v(" "),s("li",[e._v("Google Chrome browser")])]),e._v(" "),s("p",[s("strong",[e._v("Procedure")])]),e._v(" "),s("ol",[s("li",[e._v("Clone the repository.")]),e._v(" "),s("li",[e._v("Open the "),s("a",{attrs:{href:"../example"}},[e._v("example")]),e._v(" directory.")]),e._v(" "),s("li",[e._v("Run the following:\n"),s("code",[e._v("npm install")]),e._v(" "),s("code",[e._v("npm test")])])]),e._v(" "),s("p",[s("strong",[e._v("Note")]),e._v(': "karma_tests" is simply an npm script that triggers the Karma CLI command:\n'),s("code",[e._v("karma start --singleRun")]),e._v("\nAdditional information about karma configurations and CLI can be found in the "),s("a",{attrs:{href:"http://karma-runner.github.io/1.0/intro/configuration.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("official karma documentation"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"debugging-the-provided-example-feature-tests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#debugging-the-provided-example-feature-tests","aria-hidden":"true"}},[e._v("#")]),e._v(" Debugging the Provided Example Feature Tests")]),e._v(" "),s("p",[s("strong",[e._v("Additional Prerequisite")])]),e._v(" "),s("ul",[s("li",[s("em",[e._v("karma-cli")]),e._v(" package installed "),s("strong",[e._v("globally")]),e._v("\nnpm install -g karma-cli")])]),e._v(" "),s("p",[s("strong",[e._v("Procedure")])]),e._v(" "),s("ol",[s("li",[s("p",[e._v("Open "),s("a",{attrs:{href:"https://github.com/SAP/webide-client-tools/tree/master/example",target:"_blank",rel:"noopener noreferrer"}},[e._v("example"),s("OutboundLink")],1),e._v(" directory.")]),e._v(" "),s("p",[s("code",[e._v("karma start")])]),e._v(" "),s("p",[e._v("A new Chrome browser opens in a URL similar to: http://localhost:9877/?id=16652698")]),e._v(" "),s("ul",[s("li",[s("img",{attrs:{src:r(202),alt:"Karma Chrome Window"}})])])]),e._v(" "),s("li",[s("p",[e._v("Press the "),s("strong",[e._v("DEBUG")]),e._v(" button at the top right corner of the screen.\nIt now opens the URL: http://localhost:9877/debug.html\n"),s("img",{attrs:{src:r(203),alt:"Karma Debug Window"}})])]),e._v(" "),s("li",[s("p",[e._v("Open Chrome Developer Tools and search for one of the test files, for example: "),s("em",[e._v("utilsUnitTestSpec.js")]),e._v(".")])]),e._v(" "),s("li",[s("p",[e._v("Set a breakpoint in that file.")])]),e._v(" "),s("li",[s("p",[e._v("Refresh the page.")])])]),e._v(" "),s("p",[s("strong",[e._v("Note")]),e._v(": The UI/UX in the "),s("em",[e._v("debug.html")]),e._v(" file is quite useful.\nClick on a test name to "),s("strong",[e._v("only")]),e._v(" run that test. Test failures are shown with detailed error messages in the UI.")]),e._v(" "),s("h2",{attrs:{id:"integrating-the-testing-infrastructure-into-another-feature"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#integrating-the-testing-infrastructure-into-another-feature","aria-hidden":"true"}},[e._v("#")]),e._v(" Integrating the Testing Infrastructure into Another Feature")]),e._v(" "),s("p",[e._v("Instead of creating a very large step-by-step guide which quickly becomes obsolete and incorrect,\nthe components of the example are listed with their purpose and are used as "),s("strong",[e._v("live docs")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"the-components"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-components","aria-hidden":"true"}},[e._v("#")]),e._v(" The Components:")]),e._v(" "),s("h4",{attrs:{id:"devdependencies"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#devdependencies","aria-hidden":"true"}},[e._v("#")]),e._v(" DevDependencies:")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("Found in "),s("a",{attrs:{href:"https://github.com/SAP/webide-client-tools/blob/master/example/package.json",target:"_blank",rel:"noopener noreferrer"}},[e._v("package.json"),s("OutboundLink")],1)])]),e._v(" "),s("li",[s("p",[e._v("The "),s("em",[e._v("karma-*")]),e._v(" package dependencies are plugins for Karma, for example: "),s("em",[e._v("karma-chrome-launcher")]),e._v("\nallows Karma to launch Chrome for testing. However, if we want to use Firefox we can install and configure\nthe "),s("a",{attrs:{href:"https://www.npmjs.com/package/karma-firefox-launcher",target:"_blank",rel:"noopener noreferrer"}},[e._v("karma-firefox-launcher"),s("OutboundLink")],1),e._v(" plugin.")])]),e._v(" "),s("li",[s("p",[e._v("The "),s("em",[e._v("webide-client-tools")]),e._v(" package dependency is the "),s("strong",[e._v("same")]),e._v(' library developed in this repository.\nIt is highly recommended for a more specific version range constraint; the usage of "*" (latest) here is only for internal testing purposes.')])]),e._v(" "),s("li",[s("p",[e._v("The "),s("em",[e._v("webide")]),e._v(" package dependency provides the static resources needed to run SAP Web IDE locally.")])])]),e._v(" "),s("h4",{attrs:{id:"karma-configurations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#karma-configurations","aria-hidden":"true"}},[e._v("#")]),e._v(" "),s("em",[e._v("karma")]),e._v(" configurations")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("Found in "),s("a",{attrs:{href:"https://github.com/SAP/webide-client-tools/blob/master/example/karma.conf.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("karma.conf.js"),s("OutboundLink")],1)])]),e._v(" "),s("li",[s("p",[e._v("Defines the options for Karma to use.")])]),e._v(" "),s("li",[s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" karmaTools "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"@sap-webide/webide-client-tools"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("karma\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" webideConfig "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" karmaTools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("defaultProps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),s("p",[e._v("is used to obtain the default settings for the SAP Web IDE testing scenario.")])]),e._v(" "),s("li",[s("p",[e._v("It is possible to add or overwrite configurations to support custom scenarios.")])]),e._v(" "),s("li",[s("p",[e._v("Consult the "),s("a",{attrs:{href:"http://karma-runner.github.io/1.0/config/configuration-file.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("official documentation for Karma configurations"),s("OutboundLink")],1),e._v("\nwhen making changes.")])]),e._v(" "),s("li",[s("p",[e._v('By default, end users must "include" a reference to their '),s("em",[e._v("testSetup.js")]),e._v(' file and "serve" their test and production resources.\n'),s("strong",[e._v("Note")]),e._v(": The "),s("em",[e._v("node_modules/chai/chai.js")]),e._v(" open source assertion library is used in the example tests.\nHowever, it is "),s("strong",[e._v("not")]),e._v(" part of the testing infrastructure and must be manually included if needed.")])])]),e._v(" "),s("h2",{attrs:{id:"tests-runtime-configurations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tests-runtime-configurations","aria-hidden":"true"}},[e._v("#")]),e._v(" Tests Runtime Configurations")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("Found in "),s("a",{attrs:{href:"https://github.com/SAP/webide-client-tools/blob/master/example/test/testsSetup.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("testSetup.js"),s("OutboundLink")],1)])]),e._v(" "),s("li",[s("p",[e._v("This file is loaded in the browser to configure globals ("),s("em",[e._v("window")]),e._v(" global object properties) for enabling the test bootstrapping.")])]),e._v(" "),s("li",[s("p",[e._v("The most important global is "),s("em",[e._v("window.TEST_FILE_PATTERN")]),e._v(", which defines a regular expression for identifying test files and loading them as "),s("em",[e._v("require.js")]),e._v(" file dependencies.")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("Note")]),e._v(': This file can also be used to define "end user" globals. In this example, '),s("em",[e._v("chai")]),e._v(" APIs are exposed as globals.")])])]),e._v(" "),s("h2",{attrs:{id:"the-tests-themselves"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-tests-themselves","aria-hidden":"true"}},[e._v("#")]),e._v(" The Tests Themselves")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("Found in "),s("a",{attrs:{href:"https://github.com/SAP/webide-client-tools/blob/master/example/test/serviceTestSpec.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("serviceTestSpec.js"),s("OutboundLink")],1),e._v(" and\n"),s("a",{attrs:{href:"https://github.com/SAP/webide-client-tools/blob/master/example/test/utilsUnitTestSpec.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("utilsUnitTestSpec.js"),s("OutboundLink")],1)])]),e._v(" "),s("li",[s("p",[e._v("The tests are written using Mocha "),s("em",[e._v("bdd")]),e._v(" APIs (describe/it/before/...) with "),s("em",[e._v("chai")]),e._v(" "),s("em",[e._v("expect")]),e._v(" APIs for assertions.")])]),e._v(" "),s("li",[s("p",[e._v("The tests use "),s("em",[e._v("require.js")]),e._v(" to load dependencies.")])]),e._v(" "),s("li",[s("p",[e._v("The service test loads STF (Service Tests Framework), which exposes APIs for testing SAP Web IDE in an "),s("em",[e._v("iframe")]),e._v(".")]),e._v(" "),s("ul",[s("li",[e._v("STF.startWebIDE(...)")]),e._v(" "),s("li",[e._v("See "),s("a",{attrs:{href:"https://sap.github.io/webide-client-tools/web/html_docs/interfaces/_api_d_.stf_api.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("API Docs"),s("OutboundLink")],1),e._v(" for detailed info.")])])])])])}),[],!1,null,null,null);t.default=a.exports},9:function(e,t,r){"use strict";function s(e,t,r,s,a,n,o,i){var l,v="function"==typeof e?e.options:e;if(t&&(v.render=t,v.staticRenderFns=r,v._compiled=!0),s&&(v.functional=!0),n&&(v._scopeId="data-v-"+n),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},v._ssrRegister=l):a&&(l=i?function(){a.call(this,this.$root.$options.shadowRoot)}:a),l)if(v.functional){v._injectStyles=l;var _=v.render;v.render=function(e,t){return l.call(t),_(e,t)}}else{var p=v.beforeCreate;v.beforeCreate=p?[].concat(p,l):[l]}return{exports:e,options:v}}r.d(t,"a",(function(){return s}))}}]);